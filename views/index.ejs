<!DOCTYPE html>
<html>
  <head>
    <title>Fluxo de Caixa</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <h1>Fluxo de Caixa</h1>
    <hr />

    <div class="dvCaixas">
      <div>
        <b>Valor Total</b><br />
        <%= valorTotal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }) %>
      </div>
      <div>
        <b>Receita</b><br />
        <%= receitas.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }) %>
      </div>
      <div>
        <b>Despesas</b><br />
        <%= despesas.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }) %>
      </div>
    </div>

    <div class="dvSearch">
      <div>
        <form action="/">
          <input
            type="text"
            placeholder="Digite algo..."
            class="form-control"
            name="tipo"
          />
          <button type="submit" class="btn btn-primary">Buscar</button>
        </form>
      </div>
      <div>
        <a href="/adicionar" class="btn btn-primary">Adicionar</a>
      </div>
    </div>

    <div class="dvTabela">
      <table class="table table-bordered table-striped">
        <thead class="table-light">
          <tr>
            <th>Tipo</th>
            <th>Valor</th>
            <th>Status</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% extrato.forEach(item => { %>
            <tr>
              <td><%= item.tipo %></td>
              <td><%= item.valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }) %></td>
              <td>
                <% if (item.status === 1) { %>
                  <span class="badge bg-success">Receita</span>
                <% } else { %>
                  <span class="badge bg-danger">Despesa</span>
                <% } %>
              </td>
              <td style="width: 20px;">
                <a href="/excluir/<%= item.id %>"  onclick="return confirm('Confirma?')" class="btn btn-danger">Excluir</a>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
